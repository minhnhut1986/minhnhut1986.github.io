{"name":"Create new driver and driver on-boarding","id":"driver-on-boarding;create-new-driver-and-driver-on-boarding","testSteps":[{"number":1,"description":"Given ops manager creates a new driver","duration":6421,"startTime":"2019-10-28T11:14:53.955Z[GMT]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":2,"description":"Should be able to create new driver: +84983159379, 111111","duration":5240,"startTime":"2019-10-28T11:14:54.129Z[GMT]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":3,"description":"POST https://logivan-testbed1.herokuapp.com/manager/automation_tests/create_driver","duration":0,"startTime":"2019-10-28T11:14:58.060Z[GMT]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://logivan-testbed1.herokuapp.com/manager/automation_tests/create_driver","content":"{\n    \"driver\": {\n        \"phone_number\": \"+84983159379\",\n        \"password\": \"111111\"\n    }\n}","contentType":"application/json","requestHeaders":"DeviceId\u003dandroid\n\t\t\t\tPlatform\u003dandroid\n\t\t\t\tAccept\u003d*/*\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"Server: Cowboy\nDate: Mon, 28 Oct 2019 11:14:57 GMT\nConnection: keep-alive\nX-Frame-Options: SAMEORIGIN\nX-Xss-Protection: 1; mode\u003dblock\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Permitted-Cross-Domain-Policies: none\nReferrer-Policy: strict-origin-when-cross-origin\nContent-Type: application/json; charset\u003dutf-8\nEtag: W/\"596e584d613f6e2c4ae21779c0eb8345\"\nCache-Control: max-age\u003d0, private, must-revalidate\nX-Request-Id: b4875e0b-2404-4220-ad99-0db15f2e4034\nX-Runtime: 0.815490\nVary: Origin\nTransfer-Encoding: chunked\nVia: 1.1 vegur","responseCookies":"","responseBody":"{\n    \"driver\": {\n        \"id\": 25030,\n        \"name\": null,\n        \"address\": null,\n        \"phone_number\": \"+84983159379\",\n        \"email\": null,\n        \"date_of_birth\": null,\n        \"can_tax_invoice_issued\": false,\n        \"created_at\": \"2019-10-28T18:14:57.500+07:00\",\n        \"updated_at\": \"2019-10-28T18:14:57.544+07:00\",\n        \"status\": \"pending\",\n        \"referral_id\": null,\n        \"approved_referee_count\": 0,\n        \"is_company\": false,\n        \"referrals_count\": 0,\n        \"manager_id\": null,\n        \"driver_preferences\": {\n            \"preferred_route_type\": null,\n            \"preferred_pickup_place\": {\n                \n            },\n            \"preferred_dropoff_places\": [\n                \n            ]\n        },\n        \"verified_at\": null,\n        \"avatar_url\": null,\n        \"rejected_at\": null,\n        \"completed_order_count\": 0,\n        \"broker_review_state\": {\n            \"average_score\": null,\n            \"broker_review_count\": 0,\n            \"last_2_reviews\": [\n                \n            ]\n        },\n        \"ops_review_state\": {\n            \"current_mng_rating\": null,\n            \"average_score\": null,\n            \"ops_review_count\": 0,\n            \"last_2_reviews\": [\n                \n            ]\n        },\n        \"locked\": false,\n        \"locked_reason\": null,\n        \"notes\": null,\n        \"business_registration_url\": null,\n        \"business_registration_status\": null,\n        \"transportation_permit_url\": null,\n        \"transportation_permit_status\": null,\n        \"certificate_registry_url\": null,\n        \"certificate_registry_status\": null,\n        \"license_url\": null,\n        \"license_status\": null,\n        \"avatar_status\": null,\n        \"identity_id_url\": null,\n        \"identity_id_status\": null,\n        \"current_company\": null,\n        \"trucks\": [\n            \n        ],\n        \"manager\": null\n    }\n}","statusCode":201},"precondition":false,"level":2}]}]},{"number":4,"description":"When \"new\" driver updates name \u003d \"Mai Thu Hai\"","duration":1767,"startTime":"2019-10-28T11:15:01.377Z[GMT]","exception":{"errorType":"java.lang.AssertionError","message":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","stackTrace":[{"declaringClass":"lgv.automation.util.Log","methodName":"errorAndStop","fileName":"Log.java","lineNumber":30},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"updateName","fileName":"DriverSteps.java","lineNumber":176},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"shouldBeAbleToUpdateName","fileName":"DriverSteps.java","lineNumber":904},{"declaringClass":"lgv.automation.serenityCucumber.api.features.steps.driver.UpdateDriverInfo","methodName":"driver_updates_name","fileName":"UpdateDriverInfo.java","lineNumber":33},{"declaringClass":"✽","methodName":"\"new\" driver updates name \u003d \"Mai Thu Hai\"","fileName":"src/test/resources/features/api/smokeTests/driverOnboarding.feature","lineNumber":7}]},"result":"FAILURE","precondition":false,"level":0,"children":[{"number":5,"description":"Should be able to update name: 0, Mai Thu Hai","duration":1718,"startTime":"2019-10-28T11:15:01.396Z[GMT]","exception":{"errorType":"java.lang.AssertionError","message":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","stackTrace":[{"declaringClass":"lgv.automation.util.Log","methodName":"errorAndStop","fileName":"Log.java","lineNumber":30},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"updateName","fileName":"DriverSteps.java","lineNumber":176},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"shouldBeAbleToUpdateName","fileName":"DriverSteps.java","lineNumber":904},{"declaringClass":"lgv.automation.serenityCucumber.api.features.steps.driver.UpdateDriverInfo","methodName":"driver_updates_name","fileName":"UpdateDriverInfo.java","lineNumber":33},{"declaringClass":"cucumber.runner.PickleStepDefinitionMatch","methodName":"runStep","fileName":"PickleStepDefinitionMatch.java","lineNumber":50},{"declaringClass":"cucumber.runner.TestStep","methodName":"executeStep","fileName":"TestStep.java","lineNumber":63},{"declaringClass":"cucumber.runner.TestStep","methodName":"run","fileName":"TestStep.java","lineNumber":49},{"declaringClass":"cucumber.runner.PickleStepTestStep","methodName":"run","fileName":"PickleStepTestStep.java","lineNumber":43},{"declaringClass":"cucumber.runner.TestCase","methodName":"run","fileName":"TestCase.java","lineNumber":44},{"declaringClass":"cucumber.runner.Runner","methodName":"runPickle","fileName":"Runner.java","lineNumber":40}]},"result":"FAILURE","precondition":false,"level":1,"children":[{"number":6,"description":"PATCH https://logivan-testbed1.herokuapp.com/api/v2/drivers/0","duration":0,"startTime":"2019-10-28T11:15:02.074Z[GMT]","result":"SUCCESS","restQuery":{"method":"PATCH","path":"https://logivan-testbed1.herokuapp.com/api/v2/drivers/0","content":"{\n    \"driver\": {\n        \"name\": \"Mai Thu Hai\"\n    }\n}","contentType":"application/json","requestHeaders":"DeviceId\u003dandroid\n\t\t\t\tPlatform\u003dandroid\n\t\t\t\tAuthorization\u003dBearer JXKtGMhoosq4UDhfqXUxXexyhsCBuQ\n\t\t\t\tAccept\u003d*/*\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"Server: Cowboy\nDate: Mon, 28 Oct 2019 11:15:01 GMT\nConnection: keep-alive\nX-Frame-Options: SAMEORIGIN\nX-Xss-Protection: 1; mode\u003dblock\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Permitted-Cross-Domain-Policies: none\nReferrer-Policy: strict-origin-when-cross-origin\nAuthorization: JXKtGMhoosq4UDhfqXUxXexyhsCBuQ\nContent-Type: application/json; charset\u003dutf-8\nCache-Control: no-cache\nX-Request-Id: 617496b0-1e8c-4c4f-b00b-ada14dee438c\nX-Runtime: 0.051858\nVary: Origin\nTransfer-Encoding: chunked\nVia: 1.1 vegur","responseCookies":"","responseBody":"{\n    \"messages\": \"Không tìm thấy dữ liệu\",\n    \"is_success\": false,\n    \"data\": {\n        \"errors\": \"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"\n    }\n}","statusCode":404},"precondition":false,"level":2}]}]},{"number":7,"description":"And driver adds new truck that has truck_type_id \u003d 5, truck_model_id \u003d 42","duration":9,"startTime":"2019-10-28T11:15:03.148Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":8,"description":"And \"new\" driver updates identity","duration":5,"startTime":"2019-10-28T11:15:03.158Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":9,"description":"And \"new\" driver updates license","duration":8,"startTime":"2019-10-28T11:15:03.165Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":10,"description":"And driver adds preferred route type \u003d \"return_trip\", pick up area id \u003d 3 and preferred dropoff area id \u003d 5","duration":5,"startTime":"2019-10-28T11:15:03.175Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":11,"description":"And ops manager gets \"new\" driver document","duration":4,"startTime":"2019-10-28T11:15:03.181Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":12,"description":"And ops manager updates \"new\" driver identity info","duration":5,"startTime":"2019-10-28T11:15:03.190Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":13,"description":"And ops manager accepts \"new\" driver identity","duration":3,"startTime":"2019-10-28T11:15:03.197Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":14,"description":"And ops manager updates \"new\" driver license info","duration":6,"startTime":"2019-10-28T11:15:03.202Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":15,"description":"And ops manager accepts \"new\" driver license","duration":3,"startTime":"2019-10-28T11:15:03.210Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":16,"description":"And ops manager accepts \"new\" driver certificate registry","duration":3,"startTime":"2019-10-28T11:15:03.214Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":17,"description":"Then result name from get \"new\" driver info api must equal \"Mai Thu Hai\"","duration":3,"startTime":"2019-10-28T11:15:03.218Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":18,"description":"Then result truck from get certificate registries api must contain truck_type_id \u003d 5, truck_model_id \u003d 42","duration":4,"startTime":"2019-10-28T11:15:03.225Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":19,"description":"Then verify driver adds preferred successful from get preferences info api","duration":3,"startTime":"2019-10-28T11:15:03.230Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":20,"description":"Then ops manager verifies that \"new\" driver is approved from result of get driver info api","duration":4,"startTime":"2019-10-28T11:15:03.234Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":21,"description":"Verify delete driver success: 25030","duration":1863,"startTime":"2019-10-28T11:15:04.049Z[GMT]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":22,"description":"GET https://logivan-testbed1.herokuapp.com/api/v2/drivers/25030","duration":0,"startTime":"2019-10-28T11:15:04.909Z[GMT]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://logivan-testbed1.herokuapp.com/api/v2/drivers/25030","content":"","contentType":"application/json","requestHeaders":"DeviceId\u003dandroid\n\t\t\t\tPlatform\u003dandroid\n\t\t\t\tAuthorization\u003dBearer Cb6wTyejP_zxtxGhxn1fNtJSwaGLLw\n\t\t\t\tAccept\u003d*/*\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"Server: Cowboy\nDate: Mon, 28 Oct 2019 11:15:04 GMT\nConnection: keep-alive\nX-Frame-Options: SAMEORIGIN\nX-Xss-Protection: 1; mode\u003dblock\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Permitted-Cross-Domain-Policies: none\nReferrer-Policy: strict-origin-when-cross-origin\nAuthorization: Cb6wTyejP_zxtxGhxn1fNtJSwaGLLw\nContent-Type: application/json; charset\u003dutf-8\nCache-Control: no-cache\nX-Request-Id: 7a617f7d-1d66-4486-ae9b-d4e0da2ad138\nX-Runtime: 0.213916\nVary: Origin\nTransfer-Encoding: chunked\nVia: 1.1 vegur","responseCookies":"","responseBody":"{\n    \"messages\": \"Không tìm thấy dữ liệu\",\n    \"is_success\": false,\n    \"data\": {\n        \"errors\": \"Couldn\u0027t find Driver with \u0027id\u0027\u003d25030\"\n    }\n}","statusCode":404},"precondition":false,"level":1}]}],"userStory":{"id":"driver-on-boarding","storyName":"Driver on-boarding","path":"api/smokeTests/driverOnboarding.feature","type":"feature"},"featureTag":{"name":"Smoke tests/Driver on-boarding","type":"feature","displayName":"Smoke tests/Driver on-boarding"},"title":"Create new driver and driver on-boarding","tags":[{"name":"Smoke tests/Driver on-boarding","type":"feature","displayName":"Driver on-boarding"},{"name":"deleteNewDriver","type":"tag","displayName":"deleteNewDriver"},{"name":"Api/Old smoke tests","type":"theme","displayName":"Old smoke tests"},{"name":"Api/Smoke tests","type":"theme","displayName":"Smoke tests"},{"name":"Old smoke tests/Driver on-boarding","type":"feature","displayName":"Driver on-boarding"},{"name":"Api","type":"theme","displayName":"Api"}],"startTime":"2019-10-28T11:14:53.583Z[GMT]","duration":13370,"testFailureCause":{"errorType":"java.lang.AssertionError","message":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","stackTrace":[{"declaringClass":"lgv.automation.util.Log","methodName":"errorAndStop","fileName":"Log.java","lineNumber":30},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"updateName","fileName":"DriverSteps.java","lineNumber":176},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"shouldBeAbleToUpdateName","fileName":"DriverSteps.java","lineNumber":904},{"declaringClass":"lgv.automation.serenityCucumber.api.features.steps.driver.UpdateDriverInfo","methodName":"driver_updates_name","fileName":"UpdateDriverInfo.java","lineNumber":33},{"declaringClass":"cucumber.runner.PickleStepDefinitionMatch","methodName":"runStep","fileName":"PickleStepDefinitionMatch.java","lineNumber":50},{"declaringClass":"cucumber.runner.TestStep","methodName":"executeStep","fileName":"TestStep.java","lineNumber":63},{"declaringClass":"cucumber.runner.TestStep","methodName":"run","fileName":"TestStep.java","lineNumber":49},{"declaringClass":"cucumber.runner.PickleStepTestStep","methodName":"run","fileName":"PickleStepTestStep.java","lineNumber":43},{"declaringClass":"cucumber.runner.TestCase","methodName":"run","fileName":"TestCase.java","lineNumber":44},{"declaringClass":"cucumber.runner.Runner","methodName":"runPickle","fileName":"Runner.java","lineNumber":40}]},"testFailureClassname":"java.lang.AssertionError","testFailureMessage":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","testFailureSummary":"FAILURE;java.lang.AssertionError;Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP;Log.java","projectKey":"","annotatedResult":"FAILURE","isManualTestingUpToDate":false,"manual":false,"testSource":"Cucumber","result":"FAILURE"}