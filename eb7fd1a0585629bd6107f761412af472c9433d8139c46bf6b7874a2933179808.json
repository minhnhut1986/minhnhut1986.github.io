{"name":"Create new driver and driver on-boarding","id":"driver-on-boarding;create-new-driver-and-driver-on-boarding","testSteps":[{"number":1,"description":"Given ops manager creates a new driver","duration":6265,"startTime":"2019-10-25T10:21:41.998Z[GMT]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":2,"description":"Should be able to create new driver: +84983127239, 111111","duration":5101,"startTime":"2019-10-25T10:21:42.158Z[GMT]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":3,"description":"POST https://logivan-testbed1.herokuapp.com/manager/automation_tests/create_driver","duration":0,"startTime":"2019-10-25T10:21:45.960Z[GMT]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://logivan-testbed1.herokuapp.com/manager/automation_tests/create_driver","content":"{\n    \"driver\": {\n        \"phone_number\": \"+84983127239\",\n        \"password\": \"111111\"\n    }\n}","contentType":"application/json","requestHeaders":"DeviceId\u003dandroid\n\t\t\t\tPlatform\u003dandroid\n\t\t\t\tAccept\u003d*/*\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"Server: Cowboy\nDate: Fri, 25 Oct 2019 10:21:44 GMT\nConnection: keep-alive\nX-Frame-Options: SAMEORIGIN\nX-Xss-Protection: 1; mode\u003dblock\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Permitted-Cross-Domain-Policies: none\nReferrer-Policy: strict-origin-when-cross-origin\nContent-Type: application/json; charset\u003dutf-8\nEtag: W/\"ee8534d2eab7cd5f91f3370103c543da\"\nCache-Control: max-age\u003d0, private, must-revalidate\nX-Request-Id: 15cb6b7e-35f9-47ed-870e-9692c5bceaf2\nX-Runtime: 0.584306\nVary: Origin\nTransfer-Encoding: chunked\nVia: 1.1 vegur","responseCookies":"","responseBody":"{\n    \"driver\": {\n        \"id\": 25021,\n        \"name\": null,\n        \"address\": null,\n        \"phone_number\": \"+84983127239\",\n        \"email\": null,\n        \"date_of_birth\": null,\n        \"can_tax_invoice_issued\": false,\n        \"created_at\": \"2019-10-25T17:21:45.559+07:00\",\n        \"updated_at\": \"2019-10-25T17:21:45.603+07:00\",\n        \"status\": \"pending\",\n        \"referral_id\": null,\n        \"approved_referee_count\": 0,\n        \"is_company\": false,\n        \"referrals_count\": 0,\n        \"manager_id\": null,\n        \"driver_preferences\": {\n            \"preferred_route_type\": null,\n            \"preferred_pickup_place\": {\n                \n            },\n            \"preferred_dropoff_places\": [\n                \n            ]\n        },\n        \"verified_at\": null,\n        \"avatar_url\": null,\n        \"rejected_at\": null,\n        \"completed_order_count\": 0,\n        \"broker_review_state\": {\n            \"average_score\": null,\n            \"broker_review_count\": 0,\n            \"last_2_reviews\": [\n                \n            ]\n        },\n        \"ops_review_state\": {\n            \"current_mng_rating\": null,\n            \"average_score\": null,\n            \"ops_review_count\": 0,\n            \"last_2_reviews\": [\n                \n            ]\n        },\n        \"locked\": false,\n        \"locked_reason\": null,\n        \"notes\": null,\n        \"business_registration_url\": null,\n        \"business_registration_status\": null,\n        \"transportation_permit_url\": null,\n        \"transportation_permit_status\": null,\n        \"certificate_registry_url\": null,\n        \"certificate_registry_status\": null,\n        \"license_url\": null,\n        \"license_status\": null,\n        \"avatar_status\": null,\n        \"identity_id_url\": null,\n        \"identity_id_status\": null,\n        \"current_company\": null,\n        \"trucks\": [\n            \n        ],\n        \"manager\": null\n    }\n}","statusCode":201},"precondition":false,"level":2}]}]},{"number":4,"description":"When \"new\" driver updates name \u003d \"Mai Thu Hai\"","duration":1662,"startTime":"2019-10-25T10:21:49.265Z[GMT]","exception":{"errorType":"java.lang.AssertionError","message":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","stackTrace":[{"declaringClass":"lgv.automation.util.Log","methodName":"errorAndStop","fileName":"Log.java","lineNumber":30},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"updateName","fileName":"DriverSteps.java","lineNumber":176},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"shouldBeAbleToUpdateName","fileName":"DriverSteps.java","lineNumber":904},{"declaringClass":"lgv.automation.serenityCucumber.api.features.steps.driver.UpdateDriverInfo","methodName":"driver_updates_name","fileName":"UpdateDriverInfo.java","lineNumber":33},{"declaringClass":"✽","methodName":"\"new\" driver updates name \u003d \"Mai Thu Hai\"","fileName":"src/test/resources/features/api/smokeTests/driverOnboarding.feature","lineNumber":7}]},"result":"FAILURE","precondition":false,"level":0,"children":[{"number":5,"description":"Should be able to update name: 0, Mai Thu Hai","duration":1603,"startTime":"2019-10-25T10:21:49.307Z[GMT]","exception":{"errorType":"java.lang.AssertionError","message":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","stackTrace":[{"declaringClass":"lgv.automation.util.Log","methodName":"errorAndStop","fileName":"Log.java","lineNumber":30},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"updateName","fileName":"DriverSteps.java","lineNumber":176},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"shouldBeAbleToUpdateName","fileName":"DriverSteps.java","lineNumber":904},{"declaringClass":"lgv.automation.serenityCucumber.api.features.steps.driver.UpdateDriverInfo","methodName":"driver_updates_name","fileName":"UpdateDriverInfo.java","lineNumber":33},{"declaringClass":"cucumber.runner.PickleStepDefinitionMatch","methodName":"runStep","fileName":"PickleStepDefinitionMatch.java","lineNumber":50},{"declaringClass":"cucumber.runner.TestStep","methodName":"executeStep","fileName":"TestStep.java","lineNumber":63},{"declaringClass":"cucumber.runner.TestStep","methodName":"run","fileName":"TestStep.java","lineNumber":49},{"declaringClass":"cucumber.runner.PickleStepTestStep","methodName":"run","fileName":"PickleStepTestStep.java","lineNumber":43},{"declaringClass":"cucumber.runner.TestCase","methodName":"run","fileName":"TestCase.java","lineNumber":44},{"declaringClass":"cucumber.runner.Runner","methodName":"runPickle","fileName":"Runner.java","lineNumber":40}]},"result":"FAILURE","precondition":false,"level":1,"children":[{"number":6,"description":"PATCH https://logivan-testbed1.herokuapp.com/api/v2/drivers/0","duration":0,"startTime":"2019-10-25T10:21:49.896Z[GMT]","result":"SUCCESS","restQuery":{"method":"PATCH","path":"https://logivan-testbed1.herokuapp.com/api/v2/drivers/0","content":"{\n    \"driver\": {\n        \"name\": \"Mai Thu Hai\"\n    }\n}","contentType":"application/json","requestHeaders":"DeviceId\u003dandroid\n\t\t\t\tPlatform\u003dandroid\n\t\t\t\tAuthorization\u003dBearer JXKtGMhoosq4UDhfqXUxXexyhsCBuQ\n\t\t\t\tAccept\u003d*/*\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"Server: Cowboy\nDate: Fri, 25 Oct 2019 10:21:49 GMT\nConnection: keep-alive\nX-Frame-Options: SAMEORIGIN\nX-Xss-Protection: 1; mode\u003dblock\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Permitted-Cross-Domain-Policies: none\nReferrer-Policy: strict-origin-when-cross-origin\nAuthorization: JXKtGMhoosq4UDhfqXUxXexyhsCBuQ\nContent-Type: application/json; charset\u003dutf-8\nCache-Control: no-cache\nX-Request-Id: 2c703e4a-de53-4a1d-b038-aac44ff60556\nX-Runtime: 0.025036\nVary: Origin\nTransfer-Encoding: chunked\nVia: 1.1 vegur","responseCookies":"","responseBody":"{\n    \"messages\": \"Không tìm thấy dữ liệu\",\n    \"is_success\": false,\n    \"data\": {\n        \"errors\": \"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"\n    }\n}","statusCode":404},"precondition":false,"level":2}]}]},{"number":7,"description":"And driver adds new truck that has truck_type_id \u003d 5, truck_model_id \u003d 42","duration":11,"startTime":"2019-10-25T10:21:50.930Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":8,"description":"And \"new\" driver updates identity","duration":4,"startTime":"2019-10-25T10:21:50.942Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":9,"description":"And \"new\" driver updates license","duration":5,"startTime":"2019-10-25T10:21:50.947Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":10,"description":"And driver adds preferred route type \u003d \"return_trip\", pick up area id \u003d 3 and preferred dropoff area id \u003d 5","duration":5,"startTime":"2019-10-25T10:21:50.954Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":11,"description":"And ops manager gets \"new\" driver document","duration":4,"startTime":"2019-10-25T10:21:50.961Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":12,"description":"And ops manager updates \"new\" driver identity info","duration":4,"startTime":"2019-10-25T10:21:50.967Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":13,"description":"And ops manager accepts \"new\" driver identity","duration":4,"startTime":"2019-10-25T10:21:50.972Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":14,"description":"And ops manager updates \"new\" driver license info","duration":8,"startTime":"2019-10-25T10:21:50.979Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":15,"description":"And ops manager accepts \"new\" driver license","duration":7,"startTime":"2019-10-25T10:21:50.990Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":16,"description":"And ops manager accepts \"new\" driver certificate registry","duration":7,"startTime":"2019-10-25T10:21:51Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":17,"description":"Then result name from get \"new\" driver info api must equal \"Mai Thu Hai\"","duration":6,"startTime":"2019-10-25T10:21:51.010Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":18,"description":"Then result truck from get certificate registries api must contain truck_type_id \u003d 5, truck_model_id \u003d 42","duration":7,"startTime":"2019-10-25T10:21:51.019Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":19,"description":"Then verify driver adds preferred successful from get preferences info api","duration":8,"startTime":"2019-10-25T10:21:51.030Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":20,"description":"Then ops manager verifies that \"new\" driver is approved from result of get driver info api","duration":12,"startTime":"2019-10-25T10:21:51.040Z[GMT]","result":"SKIPPED","precondition":false,"level":0},{"number":21,"description":"Verify delete driver success: 25021","duration":1716,"startTime":"2019-10-25T10:21:51.813Z[GMT]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":22,"description":"GET https://logivan-testbed1.herokuapp.com/api/v2/drivers/25021","duration":0,"startTime":"2019-10-25T10:21:52.522Z[GMT]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://logivan-testbed1.herokuapp.com/api/v2/drivers/25021","content":"","contentType":"application/json","requestHeaders":"DeviceId\u003dandroid\n\t\t\t\tPlatform\u003dandroid\n\t\t\t\tAuthorization\u003dBearer Cb6wTyejP_zxtxGhxn1fNtJSwaGLLw\n\t\t\t\tAccept\u003d*/*\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"Server: Cowboy\nDate: Fri, 25 Oct 2019 10:21:52 GMT\nConnection: keep-alive\nX-Frame-Options: SAMEORIGIN\nX-Xss-Protection: 1; mode\u003dblock\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Permitted-Cross-Domain-Policies: none\nReferrer-Policy: strict-origin-when-cross-origin\nAuthorization: Cb6wTyejP_zxtxGhxn1fNtJSwaGLLw\nContent-Type: application/json; charset\u003dutf-8\nCache-Control: no-cache\nX-Request-Id: 5693e6d4-24ab-4834-ba77-655d7c235539\nX-Runtime: 0.127803\nVary: Origin\nTransfer-Encoding: chunked\nVia: 1.1 vegur","responseCookies":"","responseBody":"{\n    \"messages\": \"Không tìm thấy dữ liệu\",\n    \"is_success\": false,\n    \"data\": {\n        \"errors\": \"Couldn\u0027t find Driver with \u0027id\u0027\u003d25021\"\n    }\n}","statusCode":404},"precondition":false,"level":1}]}],"userStory":{"id":"driver-on-boarding","storyName":"Driver on-boarding","path":"api/smokeTests/driverOnboarding.feature","type":"feature"},"featureTag":{"name":"Smoke tests/Driver on-boarding","type":"feature","displayName":"Smoke tests/Driver on-boarding"},"title":"Create new driver and driver on-boarding","tags":[{"name":"Smoke tests/Driver on-boarding","type":"feature","displayName":"Driver on-boarding"},{"name":"deleteNewDriver","type":"tag","displayName":"deleteNewDriver"},{"name":"Api/Old smoke tests","type":"theme","displayName":"Old smoke tests"},{"name":"Api/Smoke tests","type":"theme","displayName":"Smoke tests"},{"name":"Old smoke tests/Driver on-boarding","type":"feature","displayName":"Driver on-boarding"},{"name":"Api","type":"theme","displayName":"Api"}],"startTime":"2019-10-25T10:21:41.704Z[GMT]","duration":12848,"testFailureCause":{"errorType":"java.lang.AssertionError","message":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","stackTrace":[{"declaringClass":"lgv.automation.util.Log","methodName":"errorAndStop","fileName":"Log.java","lineNumber":30},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"updateName","fileName":"DriverSteps.java","lineNumber":176},{"declaringClass":"lgv.automation.steps.api.DriverSteps","methodName":"shouldBeAbleToUpdateName","fileName":"DriverSteps.java","lineNumber":904},{"declaringClass":"lgv.automation.serenityCucumber.api.features.steps.driver.UpdateDriverInfo","methodName":"driver_updates_name","fileName":"UpdateDriverInfo.java","lineNumber":33},{"declaringClass":"cucumber.runner.PickleStepDefinitionMatch","methodName":"runStep","fileName":"PickleStepDefinitionMatch.java","lineNumber":50},{"declaringClass":"cucumber.runner.TestStep","methodName":"executeStep","fileName":"TestStep.java","lineNumber":63},{"declaringClass":"cucumber.runner.TestStep","methodName":"run","fileName":"TestStep.java","lineNumber":49},{"declaringClass":"cucumber.runner.PickleStepTestStep","methodName":"run","fileName":"PickleStepTestStep.java","lineNumber":43},{"declaringClass":"cucumber.runner.TestCase","methodName":"run","fileName":"TestCase.java","lineNumber":44},{"declaringClass":"cucumber.runner.Runner","methodName":"runPickle","fileName":"Runner.java","lineNumber":40}]},"testFailureClassname":"java.lang.AssertionError","testFailureMessage":"Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP","testFailureSummary":"FAILURE;java.lang.AssertionError;Update driver name error: {\"messages\":\"Không tìm thấy dữ liệu\",\"is_success\":false,\"data\":{\"errors\":\"Couldn\u0027t find Driver with \u0027id\u0027\u003d0\"}} - STOP APP;Log.java","projectKey":"","annotatedResult":"FAILURE","isManualTestingUpToDate":false,"manual":false,"testSource":"Cucumber","result":"FAILURE"}